ingressRoute:
  dashboard:
    # -- Create an IngressRoute for the dashboard
    enabled: false

additionalArguments:
  - --certificatesresolvers.le.acme.keyType=RSA2048
  - --serversTransport.insecureSkipVerify=true
env:
  - name: CF_DNS_API_TOKEN
    valueFrom:
      secretKeyRef:
        # Use the name defined in your es.yaml target
        name: cloudflare-creds
        # Use the key defined in your es.yaml data
        key: CLOUDFLARE_TERRAFORM_TOKEN

tlsOptions:
  default:
    minVersion: VersionTLS12
    cipherSuites:
      # Recommended ciphers for TLSv1.2
      - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
      - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
      - TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305
      # Recommended ciphers for TLSv1.3
      - TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
      - TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
      - TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305

service:
  enabled: true
  ## Single service is using `MixedProtocolLBService` feature gate.
  ## When set to false, it will create two Service, one for TCP and one for UDP.
  single: false
  type: LoadBalancer
  # Additional annotations applied to both TCP and UDP services (e.g. for cloud provider specific config)
  annotations:
    # Oracle Cloud Infrastructure Load Balancer annotations
    service.beta.kubernetes.io/oci-load-balancer-shape: "flexible"
    service.beta.kubernetes.io/oci-load-balancer-shape-flex-min: "10"
    service.beta.kubernetes.io/oci-load-balancer-shape-flex-max: "10"
    external-dns.alpha.kubernetes.io/hostname: "traefik-prod.plagueworks.org"
    external-dns.alpha.kubernetes.io/cloudflare-proxied: "true"
    external-dns.alpha.kubernetes.io/cloudflare-comment: "This is managed by ExternalDns in oke-zeus-prod-apps"

persistence:
  enabled: true
  name: data
  accessMode: ReadWriteOnce
  size: 50Gi
  path: /data
  storageClass: "oci-bv"
  annotations: {}


certificatesResolvers:
  le:
    acme:
      email: mervinhemaraju16@gmail.com
      dnsChallenge:
        provider: cloudflare
        resolvers:
          - 1.1.1.1
          - 8.8.8.8
        delayBeforeCheck: 60
      storage: /data/acme.json

resources:
  requests:
    cpu: "200m"
    memory: "300Mi"
  limits:
    cpu: "300m"
    memory: "512Mi"

ports:
  websecure:
    tls:
      certResolver: "le"